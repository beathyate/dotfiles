# environment variables
export POSTGRES_BIN="/Applications/Postgres93.app/Contents/MacOS/bin" # some *-config files conflict with homebrew
export XCODE_BIN="/Applications/Xcode.app/Contents/Developer/usr/bin"
export HEROKU_BIN="/usr/local/heroku/bin"
export PATH="/usr/local/bin:/usr/local/sbin:$HEROKU_BIN:$POSTGRES_BIN:$XCODE_BIN:$PATH"
export RBENV_ROOT="/usr/local/var/rbenv"
export EDITOR="/usr/local/bin/mate -w"
export CODE_DIR="$HOME/Code/"
export GOPATH="$CODE_DIR/go"

# use a more up-to-date certfile so we can use homebrew's openssl (required for Ruby 2.0)
export SSL_CERT_FILE=/usr/local/opt/curl-ca-bundle/share/ca-bundle.crt

# requires vcprompt: brew install vcprompt
PS1="\n\u@\h:\w \$(vcprompt)\nâ†’ "

# bash_completion initializer
if [ -f $(brew --prefix)/etc/bash_completion ]; then
  . $(brew --prefix)/etc/bash_completion
fi

# code dir function and autocompletion
function cdc {
  if [ "$1" != "" ]; then
    cd $CODE_DIR && cd $1
  else
    cd $CODE_DIR
  fi
}

_cdc()
{
  local cur=${COMP_WORDS[COMP_CWORD]}
  COMPREPLY=( $(compgen -W "$(ls $CODE_DIR)" -- $cur) )
}
complete -F _cdc cdc

# http server on working directory
function serve {
  ruby -run -e httpd -- -p 5555 .
}

# rbenv initialization
eval "$(rbenv init -)"

# aliases
alias lsl='ls -laGh'
alias bx="bundle exec"
alias deploy="date && git push heroku"
alias fst="foreman start -f Procfile.dev"
alias rh="pbpaste | highlight --syntax=ruby --style zenburn -O rtf | pbcopy"
alias rvmsudo="sudo"
