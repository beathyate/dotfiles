# environment variables
export LOCAL_BIN="/usr/local/bin:/usr/local/sbin"
export POSTGRES_BIN="/Applications/Postgres.app/Contents/Versions/latest/bin"
export XCODE_BIN="/Applications/Xcode.app/Contents/Developer/usr/bin"
export PATH="$LOCAL_BIN:$POSTGRES_BIN:$XCODE_BIN:$PATH"
export EDITOR="/usr/local/bin/atom -w"
export CODE_DIR="$HOME/Code"
export GOPATH="$HOME/.go"
export HOMEBREW_GITHUB_API_TOKEN="$(cat $HOME/.github_token)"
export RUBYMOTION_ANDROID_SDK="$HOME/.rubymotion-android/sdk"
export RUBYMOTION_ANDROID_NDK="$HOME/.rubymotion-android/ndk"

# simplify prompt
PS1="\n$ "

# bash_completion initializer
if [ -f $(brew --prefix)/etc/bash_completion ]; then
  . $(brew --prefix)/etc/bash_completion
fi

# code dir function and autocompletion
function cdc {
  cd "$CODE_DIR/$1";
}
_cdc()
{
  local cur=${COMP_WORDS[COMP_CWORD]}
  COMPREPLY=( $(compgen -W "$(echo $CODE_DIR/*/* | sed "s|$CODE_DIR/||g")" -- $cur) )
}
complete -F _cdc cdc

# heroku functions
function production {
  heroku "$@" -r production;
}
function staging {
  heroku "$@" -r staging;
}

# AWS autocompletion
complete -C aws_completer aws

# chruby initializer
source /usr/local/share/chruby/chruby.sh
source /usr/local/share/chruby/auto.sh
chruby $(cat ~/.ruby-version)

# aliases
alias lsl="pwd && ls -laGh"
alias bx="bundle exec"
alias console="heroku local:run bin/rails console"
alias generate="heroku local:run bin/rails generate"
alias binrake="heroku local:run bin/rake"
alias start="heroku local:start"
alias run="heroku local:run"
alias migrate="heroku local:run bin/rake db:migrate"
alias rollback="heroku local:run bin/rake db:rollback"
