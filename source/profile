# environment variables
export POSTGRES_BIN="/Applications/Postgres.app/Contents/Versions/9.4/bin"
export XCODE_BIN="/Applications/Xcode.app/Contents/Developer/usr/bin"
export PATH="/usr/local/bin:/usr/local/sbin:$POSTGRES_BIN:$XCODE_BIN:$PATH"
export RBENV_ROOT="/usr/local/var/rbenv"
export EDITOR="/usr/local/bin/atom -w"
export CODE_DIR="$HOME/Code"
export GOPATH="$HOME/.go"
export HOMEBREW_GITHUB_API_TOKEN="$(cat $HOME/.github_token)"

# simplify prompt
PS1="\n$ "

# bash_completion initializer
if [ -f $(brew --prefix)/etc/bash_completion ]; then
  . $(brew --prefix)/etc/bash_completion
fi

# code dir function and autocompletion
function cdc {
  cd "$CODE_DIR/$1";
}
_cdc()
{
  local cur=${COMP_WORDS[COMP_CWORD]}
  COMPREPLY=( $(compgen -W "$(echo $CODE_DIR/*/* | sed "s|$CODE_DIR/||g")" -- $cur) )
}
complete -F _cdc cdc

# heroku functions
function production {
  heroku "$@" -r production;
}
function staging {
  heroku "$@" -r staging;
}
function legacy {
  heroku "$@" -r legacy;
}

# AWS autocompletion
complete -C aws_completer aws

# rbenv initialization
eval "$(rbenv init -)"

# aliases
alias lsl="pwd && ls -laGh"
alias bx="bundle exec"
alias console="heroku local:run bin/rails console"
alias generate="heroku local:run bin/rails generate"
alias brake="heroku local:run bin/rake"
alias start="heroku local"
alias run="heroku local:run"
alias migrate="heroku local:run bin/rake db:migrate"
alias rollback="heroku local:run bin/rake db:rollback"
